<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Lihui Chen" />
<meta name="author" content="Xuechen Yu" />
<meta name="author" content="Richard Li (Xuanyou)" />


<title>Final Project</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Final Project</h1>
<h4 class="author">Lihui Chen</h4>
<h4 class="author">Xuechen Yu</h4>
<h4 class="author">Richard Li (Xuanyou)</h4>



<div id="background-and-motivation" class="section level1">
<h1>1. Background and Motivation</h1>
<p>Metastatic colorectal cancer (mCRC), which is a significant challenge
in oncology, remains something that has a substantial impact on patient
morbidity and mortality. Even though there have been a lot of
advancements in therapeutic challenges, the prognosis for patients with
mCRC is often poor. The selection of first-line therapy is thus a
critical determinant of clinical outcomes.</p>
<p>The management of mCRC has evolved with the introduction of targeted
therapies, which aim to improve survival rates and quality of life.
Among these, the epidermal growth factor receptor (EGFR) inhibitor
panitumumab has shown promise when used in combination with the
conventional chemotherapy regimen FOLFOX (a combination of folinic acid,
fluorouracil, and oxaliplatin).</p>
<p>The trial, NCT00364013, is a randomized, multicenter, phase 3 study.
It was designed to evaluate the efficacy of panitumumab in combination
with FOLFOX versus FOLFOX alone as first-line therapy for patients with
previously untreated mCRC. This study holds a repository of rich
clinical data, including patient demographics, treatment details,
response criteria, survival metrics, and adverse events. Such
comprehensive data presents an invaluable opportunity for the
application of advanced statistical and machine learning models to
predict patient outcomes.</p>
<p>The motivation behind utilizing these computational models lies in
their ability to investigate complex patterns within the data. It
potentially leads to the identification of prognostic variables and the
development of predictive models for patient survival. By applying these
methodologies, the research can shed light on the multifaceted nature of
mCRC progression and response to treatment. Moreover, it strives to
enhance the decision-making process in clinical settings, enabling
personalized medicine approaches and optimizing therapeutic
efficacy.</p>
</div>
<div id="research-question" class="section level1">
<h1>2. Research question</h1>
<ol style="list-style-type: decimal">
<li><p>How can robust statistical and machine learning models be
developed and validated using the trial dataset to accurately predict
mortality in patients with metastatic colorectal cancer (mCRC)?</p></li>
<li><p>What are the key clinical and treatment-related factors that
significantly impact the survival of patients with mCRC, and how can
their influence be quantified and incorporated into predictive models
for patient survival?</p></li>
</ol>
</div>
<div id="data-cleaning-and-exploration" class="section level1">
<h1>3. Data cleaning and exploration</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(bis620<span class="fl">.2022</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>data <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>  <span class="fu">full_join</span>(biomark, <span class="at">by =</span> <span class="st">&#39;SUBJID&#39;</span>)</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>data1 <span class="ot">=</span> data</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>my_func <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>    </span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>  <span class="co"># Function to convert a categorical column to numeric</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>  convert_to_numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(column) {</span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>    <span class="co"># Treat NA or blank values as &#39;unknown&#39;</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a>    column[<span class="fu">is.na</span>(column) <span class="sc">|</span> column <span class="sc">==</span> <span class="st">&quot;&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;unknown&quot;</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a>  </span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>    <span class="co"># Convert the categorical column to a factor and then to numeric</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>    <span class="fu">as.numeric</span>(<span class="fu">factor</span>(column)) <span class="sc">-</span> <span class="dv">1</span>  <span class="co"># Subtract 1 to start encoding at 0</span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a>  }</span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a>  </span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a>  <span class="co"># Create dummy variables for &#39;sex&#39; and &#39;race&#39;, and bind them to the dataset</span></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a>  <span class="co"># if(&quot;sex&quot; %in% names(data)) {</span></span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>  <span class="co">#   sex_dummies &lt;- model.matrix(~ sex - 1, data)</span></span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a>  <span class="co">#   colnames(sex_dummies) &lt;- paste(&quot;sex&quot;, colnames(sex_dummies), sep = &quot;_&quot;)</span></span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>  <span class="co">#   data &lt;- bind_cols(data, as.data.frame(sex_dummies))</span></span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>  <span class="co">#   data &lt;- data %&gt;% select(-sex)</span></span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a>  <span class="co"># }</span></span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a>  </span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a>  <span class="co"># if(&quot;race&quot; %in% names(data)) {</span></span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a>  <span class="co">#   race_dummies &lt;- model.matrix(~ race - 1, data)</span></span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a>  <span class="co">#   colnames(race_dummies) &lt;- paste(&quot;race&quot;, colnames(race_dummies), sep = &quot;_&quot;)</span></span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a>  <span class="co">#   data &lt;- bind_cols(data, as.data.frame(race_dummies))</span></span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a>  <span class="co">#   data &lt;- data %&gt;% select(-race)</span></span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a>  <span class="co"># }</span></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a>  </span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a>  <span class="co"># Apply the conversion to all other categorical columns except the specified ones</span></span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a>  categorical_columns <span class="ot">&lt;-</span> <span class="fu">sapply</span>(df, is.character)</span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a>  </span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a>  categorical_columns[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span> <span class="co"># Assuming the first column is the Subject ID</span></span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a>  <span class="co">#categorical_columns[20:37] &lt;- FALSE # Exclude columns 20 to 37</span></span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a>  categorical_columns[<span class="dv">20</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a>  categorical_columns[<span class="dv">22</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a>  categorical_columns[<span class="dv">24</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a>  categorical_columns[<span class="dv">26</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a>  categorical_columns[<span class="dv">28</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-55"><a href="#cb1-55" tabindex="-1"></a>  categorical_columns[<span class="dv">30</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-56"><a href="#cb1-56" tabindex="-1"></a>  categorical_columns[<span class="dv">32</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-57"><a href="#cb1-57" tabindex="-1"></a>  categorical_columns[<span class="dv">34</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-58"><a href="#cb1-58" tabindex="-1"></a>  categorical_columns[<span class="dv">36</span>] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb1-59"><a href="#cb1-59" tabindex="-1"></a>  </span>
<span id="cb1-60"><a href="#cb1-60" tabindex="-1"></a>  df[categorical_columns] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(df[categorical_columns], convert_to_numeric)</span>
<span id="cb1-61"><a href="#cb1-61" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" tabindex="-1"></a>  <span class="co"># variables of interest</span></span>
<span id="cb1-63"><a href="#cb1-63" tabindex="-1"></a>  var_of_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ATRT&quot;</span>, <span class="st">&quot;PRSURG&quot;</span>, <span class="st">&quot;LIVERMET&quot;</span>, <span class="st">&quot;AGE&quot;</span>, <span class="st">&quot;SEX&quot;</span>, <span class="st">&quot;B_WEIGHT&quot;</span>, <span class="st">&quot;B_HEIGHT&quot;</span>, <span class="st">&quot;B_ECOG&quot;</span>, <span class="st">&quot;B_METANM&quot;</span>, <span class="st">&quot;DIAGTYPE&quot;</span>, <span class="st">&quot;DTH&quot;</span>, <span class="st">&quot;DTHDY&quot;</span>)</span>
<span id="cb1-64"><a href="#cb1-64" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[var_of_interest]</span>
<span id="cb1-65"><a href="#cb1-65" tabindex="-1"></a>  </span>
<span id="cb1-66"><a href="#cb1-66" tabindex="-1"></a>  <span class="co"># Explore missing values</span></span>
<span id="cb1-67"><a href="#cb1-67" tabindex="-1"></a>  missing_values <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="fu">length</span>(var_of_interest))</span>
<span id="cb1-68"><a href="#cb1-68" tabindex="-1"></a>  </span>
<span id="cb1-69"><a href="#cb1-69" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(var_of_interest)) {</span>
<span id="cb1-70"><a href="#cb1-70" tabindex="-1"></a>    missing_values[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(df[[var_of_interest[i]]]))</span>
<span id="cb1-71"><a href="#cb1-71" tabindex="-1"></a>  }</span>
<span id="cb1-72"><a href="#cb1-72" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" tabindex="-1"></a>  missing_values_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Variable =</span> var_of_interest, <span class="at">MissingValuesCount =</span> missing_values)</span>
<span id="cb1-74"><a href="#cb1-74" tabindex="-1"></a>  <span class="fu">print</span>(missing_values_df)</span>
<span id="cb1-75"><a href="#cb1-75" tabindex="-1"></a>  </span>
<span id="cb1-76"><a href="#cb1-76" tabindex="-1"></a>  <span class="co"># Remove rows with any missing values</span></span>
<span id="cb1-77"><a href="#cb1-77" tabindex="-1"></a>  final_df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(df)</span>
<span id="cb1-78"><a href="#cb1-78" tabindex="-1"></a>  </span>
<span id="cb1-79"><a href="#cb1-79" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Original number of rows:&quot;</span>, <span class="fu">nrow</span>(df)))</span>
<span id="cb1-80"><a href="#cb1-80" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Number of rows after removing missing data:&quot;</span>, <span class="fu">nrow</span>(final_df)))</span>
<span id="cb1-81"><a href="#cb1-81" tabindex="-1"></a>  </span>
<span id="cb1-82"><a href="#cb1-82" tabindex="-1"></a>  <span class="fu">return</span>(final_df)</span>
<span id="cb1-83"><a href="#cb1-83" tabindex="-1"></a>}</span>
<span id="cb1-84"><a href="#cb1-84" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" tabindex="-1"></a>final_df_clean <span class="ot">=</span> <span class="fu">my_func</span>(data)</span>
<span id="cb1-86"><a href="#cb1-86" tabindex="-1"></a><span class="co">#&gt;    Variable MissingValuesCount</span></span>
<span id="cb1-87"><a href="#cb1-87" tabindex="-1"></a><span class="co">#&gt; 1      ATRT                  0</span></span>
<span id="cb1-88"><a href="#cb1-88" tabindex="-1"></a><span class="co">#&gt; 2    PRSURG                  0</span></span>
<span id="cb1-89"><a href="#cb1-89" tabindex="-1"></a><span class="co">#&gt; 3  LIVERMET                  0</span></span>
<span id="cb1-90"><a href="#cb1-90" tabindex="-1"></a><span class="co">#&gt; 4       AGE                  0</span></span>
<span id="cb1-91"><a href="#cb1-91" tabindex="-1"></a><span class="co">#&gt; 5       SEX                  0</span></span>
<span id="cb1-92"><a href="#cb1-92" tabindex="-1"></a><span class="co">#&gt; 6  B_WEIGHT                  0</span></span>
<span id="cb1-93"><a href="#cb1-93" tabindex="-1"></a><span class="co">#&gt; 7  B_HEIGHT                  1</span></span>
<span id="cb1-94"><a href="#cb1-94" tabindex="-1"></a><span class="co">#&gt; 8    B_ECOG                  0</span></span>
<span id="cb1-95"><a href="#cb1-95" tabindex="-1"></a><span class="co">#&gt; 9  B_METANM                  3</span></span>
<span id="cb1-96"><a href="#cb1-96" tabindex="-1"></a><span class="co">#&gt; 10 DIAGTYPE                  0</span></span>
<span id="cb1-97"><a href="#cb1-97" tabindex="-1"></a><span class="co">#&gt; 11      DTH                  0</span></span>
<span id="cb1-98"><a href="#cb1-98" tabindex="-1"></a><span class="co">#&gt; 12    DTHDY                  0</span></span>
<span id="cb1-99"><a href="#cb1-99" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Original number of rows: 935&quot;</span></span>
<span id="cb1-100"><a href="#cb1-100" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Number of rows after removing missing data: 931&quot;</span></span></code></pre></div>
</div>
<div id="analysis" class="section level1">
<h1>4. Analysis</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Check Package Installation</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#&gt; randomForest 4.7-1.1</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; Type rfNews() to see new features/changes/bug fixes.</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;randomForest&#39;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; The following object is masked from &#39;package:dplyr&#39;:</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt;     combine</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt; Loading required package: rpart</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">library</span>(caTools)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;ggplot2&#39;</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; The following object is masked from &#39;package:randomForest&#39;:</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt;     margin</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt; Loading required package: lattice</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="fu">library</span>(pROC)</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt; Type &#39;citation(&quot;pROC&quot;)&#39; for a citation.</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;pROC&#39;</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">#&gt;     cov, smooth, var</span></span></code></pre></div>
<div id="survival-analysis-coxph-model" class="section level2">
<h2>4.1 Survival Analysis – Coxph Model</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;survival&#39;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt; The following object is masked from &#39;package:caret&#39;:</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt;     cluster</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>Vars <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;ATRT&quot;</span>, <span class="st">&quot;PRSURG&quot;</span>, <span class="st">&quot;LIVERMET&quot;</span>, <span class="st">&quot;AGE&quot;</span>, <span class="st">&quot;SEX&quot;</span>, <span class="st">&quot;B_WEIGHT&quot;</span>, <span class="st">&quot;B_HEIGHT&quot;</span>, <span class="st">&quot;RACE&quot;</span>, <span class="st">&quot;B_ECOG&quot;</span>, <span class="st">&quot;B_METANM&quot;</span>, <span class="st">&quot;DIAGTYPE&quot;</span>)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>Model1 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(DTHDY, DTH) <span class="sc">~</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>                ATRT <span class="sc">+</span> PRSURG <span class="sc">+</span> LIVERMET <span class="sc">+</span> AGE <span class="sc">+</span> SEX <span class="sc">+</span> B_WEIGHT <span class="sc">+</span> B_HEIGHT <span class="sc">+</span> B_ECOG <span class="sc">+</span> B_METANM <span class="sc">+</span> DIAGTYPE,</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>                  <span class="at">data=</span>final_df_clean)</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>Model1</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; Call:</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">#&gt; coxph(formula = Surv(DTHDY, DTH) ~ ATRT + PRSURG + LIVERMET + </span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co">#&gt;     AGE + SEX + B_WEIGHT + B_HEIGHT + B_ECOG + B_METANM + DIAGTYPE, </span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co">#&gt;     data = final_df_clean)</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="co">#&gt;               coef exp(coef)  se(coef)      z        p</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="co">#&gt; ATRT     -0.008370  0.991665  0.076785 -0.109   0.9132</span></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="co">#&gt; PRSURG   -0.288160  0.749641  0.126651 -2.275   0.0229</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="co">#&gt; LIVERMET  0.001244  1.001245  0.122638  0.010   0.9919</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="co">#&gt; AGE       0.008882  1.008922  0.003912  2.271   0.0232</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="co">#&gt; SEX      -0.099939  0.904893  0.107896 -0.926   0.3543</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="co">#&gt; B_WEIGHT -0.007046  0.992978  0.003170 -2.223   0.0262</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="co">#&gt; B_HEIGHT  0.009358  1.009402  0.006237  1.500   0.1335</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="co">#&gt; B_ECOG    0.217901  1.243464  0.039852  5.468 4.56e-08</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="co">#&gt; B_METANM  0.177107  1.193758  0.032586  5.435 5.48e-08</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="co">#&gt; DIAGTYPE -0.223741  0.799522  0.083541 -2.678   0.0074</span></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a><span class="co">#&gt; Likelihood ratio test=90.19  on 10 df, p=4.906e-15</span></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="co">#&gt; n= 931, number of events= 687</span></span></code></pre></div>
</div>
</div>
<div id="interpretation-and-conclusions" class="section level1">
<h1>5. Interpretation and conclusions</h1>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
